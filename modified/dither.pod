=head1 NAME

B<dither> -- reduce number of colors in an image with dithering

=head1 SYNOPSIS

B<dither> [I<-dv>] [I<-p name>[.I<size>]] I<input> I<output>

=head1 DESCRIPTION

B<dither> processes image files in PNG or binary PPM format with the goal of
reducing its number of colors. Functionality includes generating a palette of
colors automatically and writing the output image with the signal optionally
dithered (Floyd-Steinberg method).

Arguments for the input and output file are both required.

The palette used in the operation can be generated from different presets and
sizes, or be completely customized. Details about palette generation are
described below in the corresponding section.

The input file format is deduced by analysing the image header. The output
file format is decided according to its extension. Use a C<.png> extension to
have output written as a PNG file. Any other extension will result in a binary
PPM file.

=head2 Options

Accepted options are:

=over 10

=item B<-v>

Verbose mode: the program will write the palette used to C<stdout>. Useful to
capture a palette generated by the program.

=item B<-p> I<name>[I<.size>]

Palette generation method. Size must be an integer greater than 0 and is
optional in some cases. Check the section on palettes below to learn more.

=item B<-d>

Disables dithering. Final image will have pixels matched to the closest
palette color only.

=back

=head2 Palette Generation

These are the possible palettes and their descriptions, according to the
identifier. If no palette is set the program will use I<rgb> by default.

=over 10

=item I<auto>

Automatically generate a palette of colors from the input image, using a
median-cut algorithm. Size is required and must be a power of 2.

=item I<custom>

Custom palette, given by the user and read from C<stdin>. Size is required.
The palette format must be a sequence of triplets, integers in the range
[0-255] separated by whitespace. Example:

    0 0 0
    12 150 255
    255 255 255

=item I<rgb>

Standard 8 colors RGB, equivalent to 3-bit RGB. Size is not required and will
be ignored if set.

=item I<bw>

Black and white palette. Size is optional and will default to 2. When size is
greater than 2, a grayscale palette with I<size> number of colors will be
generated.

=back

=head1 EXAMPLES

Apply dithering to an image, using a 3-bit RGB palette:

    $ dither input.ppm output.ppm

Apply dithering to an image, using a 4 tone grayscale palette:

    $ dither -p bw.4 input.ppm output.ppm

Apply dithering to an image, using an automatically generated palette of 8
colors, dumping the palette to a file named I<palette.txt>:

    $ dither -vp auto.8 input.ppm output.ppm > palette.txt

Only generate a palette of colors of size 16, printing it to C<stdout> without
saving the final image:

    $ dither -vp auto.16 input.ppm /dev/null

=head1 ACKNOWLEDGEMENTS

Thank you Robert W. Floyd, Louis Steinberg and Paul Heckbert for your work and
development of these algorithms.

=head1 AUTHORS

This software and manual were written by Cesar Tessarin on August 2017.
